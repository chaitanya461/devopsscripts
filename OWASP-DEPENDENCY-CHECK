OWASP Dependency-Check is a tool that identifies project dependencies and checks if there are any known, publicly disclosed, vulnerabilities. It can be used in various software development contexts to enhance the security of applications by identifying and alerting developers about vulnerable components that may be included in their projects.

Go to Plugins and install OWASP Dependency-Check and restart

Go to Tools -> Dependency-Check installations -> Name DC-> install automatically --> Save


stage('OWASP Dependency Check') {

  steps {

      dependencyCheck additionalArguments: '--scan./', odcInstallation: 'DC'

      dependencyCheckPublisher pattern: '**/dependency-check-report.xml'
       }
}

stage('Sonar Quality Gate Scan') {

steps {

      timeout(time: 15, unit: "MINUTES") {

      waitForQualityGate abortPipeline: false
      }
   }
}
-----------------------------------------------------------------------------------------------------------------------------------------------

pipeline {
    agent any 
    stages {
        stage('checkout') {
            steps {
                git 'https://github.com/ReyazShaik/java-project-maven-new.git'
            }
        }
        stage('compile') {
            steps {
                sh 'mvn compile'
            }
        }
        stage('test') {
            steps {
                sh 'mvn test'
            }
        }
        stage('Artifacts') {
            steps {
                sh 'mvn clean package'
            }
        }
        // Scanning must happen BEFORE the Quality Gate check
        stage('SonarQube Scanning') {
            steps {
                withSonarQubeEnv('SonarQube') {
                    sh 'mvn org.sonarsource.scanner.maven:sonar-maven-plugin:3.7.0.1746:sonar'
                }
            }
        }
       stage('OWASP Dependency Check') {
    steps {
        dependencyCheck(
            // Ensure there is a space between -s and './'
            additionalArguments: '--scan "./" --format "ALL"', 
            odcInstallation: 'DC' // Use the name from Global Tool Configuration
        )
    }
}
stage('Publish Reports') {
    steps {
        // This looks for reports to display in the Jenkins UI
        dependencyCheckPublisher pattern: '**/dependency-check-report.xml'
    }
}

        stage('Sonar Quality Gate Scan') {
            steps {
                timeout(time: 15, unit: "MINUTES") {
                    waitForQualityGate abortPipeline: false
                }
            }
        }
        stage('upload to s3') {
            steps {
                s3Upload(
                    consoleLogLevel: 'INFO', 
                    dontSetBuildResultOnFailure: false, 
                    dontWaitForConcurrentBuildCompletion: false, 
                    entries: [[
                        bucket: 'buct-s5', // Removed leading space in bucket name
                        excludedFile: '', 
                        flatten: false, 
                        gzipFiles: false, 
                        keepForever: false, 
                        managedArtifacts: false, 
                        noUploadOnFailure: false, 
                        selectedRegion: 'ap-south-1', 
                        showDirectlyInBrowser: false, 
                        sourceFile: '**/*.war', 
                        storageClass: 'STANDARD', 
                        uploadFromSlave: false, 
                        useServerSideEncryption: false
                    ]], 
                    pluginFailureResultConstraint: 'FAILURE', 
                    profileName: 's4credit', 
                    userMetadata: []
                )
            }
        }
    }
}
